<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…ØªØ¬Ø±ÙŠ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #2563eb; --secondary: #10b981; --bg: #f3f4f6; }
        body { font-family: 'Tajawal', sans-serif; background: var(--bg); margin: 0; padding: 20px; }
        .container { max-width: 900px; margin: auto; }
        h1 { text-align: center; color: #333; margin-bottom: 30px; }
        
        /* ØªØµÙ…ÙŠÙ… Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª */
        .products-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; }
        .card { background: white; border-radius: 15px; padding: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); text-align: center; border: 1px solid #eee; }
        .card img { width: 100%; height: 180px; object-fit: cover; border-radius: 10px; margin-bottom: 15px; background: #fafafa; }
        .card h3 { margin: 10px 0; color: #333; }
        .card .price-tag { color: var(--secondary); font-weight: bold; font-size: 1.1em; margin-bottom: 15px; }
        
        /* Ø§Ù„ÙØ§ØªÙˆØ±Ø© */
        .invoice-section { background: white; padding: 30px; border-radius: 15px; margin-top: 40px; border: 2px solid #ddd; box-shadow: 0 10px 20px rgba(0,0,0,0.05); }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { border-bottom: 1px solid #eee; padding: 15px; text-align: right; }
        th { background: #f8f9fa; color: #555; }
        
        .total-area { background: #f1f5f9; padding: 20px; border-radius: 10px; margin-top: 10px; }
        .total-area p { margin: 5px 0; font-size: 1.2em; display: flex; justify-content: space-between; }
        .total-area strong { color: #e11d48; }

        /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
        .buttons-group { display: flex; gap: 15px; margin-top: 25px; }
        button { flex: 1; padding: 15px; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; font-family: 'Tajawal'; font-size: 1em; transition: 0.3s; }
        .btn-add { background: var(--primary); color: white; width: 100%; }
        .btn-add:hover { background: #1d4ed8; }
        .btn-wa { background: #25d366; color: white; }
        .btn-wa:hover { background: #15803d; }
        .btn-print { background: #334155; color: white; }

        /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© (ÙŠØ®ÙÙŠ ÙƒÙ„ Ø´ÙŠØ¡ Ø¹Ø¯Ø§ Ø§Ù„ÙØ§ØªÙˆØ±Ø©) */
        @media print {
            .products-grid, .btn-add, .btn-wa, h1, .btn-print, .buttons-group { display: none !important; }
            body { background: white; padding: 0; }
            .invoice-section { border: none; width: 100%; margin: 0; }
            .invoice-section h2 { color: black !important; }
        }
    </style>
</head>
<body>

<div class="container">
    <h1>âœ¨ Ù…ØªØ¬Ø±ÙŠ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</h1>

    <div class="products-grid" id="products-list"></div>

    <div class="invoice-section" id="invoice">
        <h2 style="text-align: center; color: var(--primary);">ğŸ§¾ ÙØ§ØªÙˆØ±Ø© Ø§Ù„Ø­Ø¬Ø²</h2>
        <p style="text-align: center; color: #666;">Ø§Ù„ØªØ§Ø±ÙŠØ®: <span id="date"></span></p>
        
        <table>
            <thead>
                <tr>
                    <th>Ø§Ù„Ù…Ù†ØªØ¬</th>
                    <th>Ø¨Ø§Ù„Ø¯ÙŠÙ†Ø§Ø±</th>
                    <th>Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø± ($)</th>
                </tr>
            </thead>
            <tbody id="cart-rows">
                </tbody>
        </table>
        
        <div class="total-area">
            <p>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ (Ø¹.Ø¯): <strong id="total-local">0</strong></p>
            <p>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø± ($): <strong id="total-usd">0.00</strong></p>
        </div>

        <div class="buttons-group">
            <button class="btn-wa" onclick="sendToWhatsApp()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ ÙˆØ§ØªØ³Ø§Ø¨ âœ…</button>
            <button class="btn-print" onclick="window.print()">ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© PDF ğŸ–¨ï¸</button>
        </div>
    </div>
</div>

<script>
    // --- (1) Ø£Ø¶Ù Ù…Ù†ØªØ¬Ø§ØªÙƒ Ù‡Ù†Ø§ ---
    const myProducts = [
        { id: 1, name: "Ù…Ù†ØªØ¬ ØªØ¬Ø±ÙŠØ¨ÙŠ 1", price: 25000, img: "https://via.placeholder.com/300x200?text=Product+1" },
        { id: 2, name: "Ù…Ù†ØªØ¬ ØªØ¬Ø±ÙŠØ¨ÙŠ 2", price: 50000, img: "https://via.placeholder.com/300x200?text=Product+2" },
        { id: 3, name: "Ù…Ù†ØªØ¬ ØªØ¬Ø±ÙŠØ¨ÙŠ 3", price: 100000, img: "https://via.placeholder.com/300x200?text=Product+3" }
    ];

    // --- (2) Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø© ---
    const EXCHANGE_RATE = 1500; // Ø³Ø¹Ø± ØµØ±Ù Ø§Ù„Ø¯ÙˆÙ„Ø§Ø± Ù…Ù‚Ø§Ø¨Ù„ Ø§Ù„Ø¯ÙŠÙ†Ø§Ø±
    let cart = [];

    // ÙˆØ¸ÙŠÙØ© Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
    function displayProducts() {
        const grid = document.getElementById('products-list');
        grid.innerHTML = myProducts.map(p => `
            <div class="card">
                <img src="${p.img}" alt="${p.name}">
                <h3>${p.name}</h3>
                <div class="price-tag">${p.price.toLocaleString()} Ø¯ÙŠÙ†Ø§Ø±</div>
                <button class="btn-add" onclick="addToCart(${p.id})">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©</button>
            </div>
        `).join('');
    }

    // ÙˆØ¸ÙŠÙØ© Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ù…Ù†ØªØ¬ Ù„Ù„Ø³Ù„Ø©
    function addToCart(id) {
        const item = myProducts.find(p => p.id === id);
        cart.push(item);
        renderInvoice();
    }

    // ÙˆØ¸ÙŠÙØ© ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ§ØªÙˆØ±Ø©
    function renderInvoice() {
        const tbody = document.getElementById('cart-rows');
        document.getElementById('date').innerText = new Date().toLocaleDateString('ar-IQ');

        tbody.innerHTML = cart.map(item => `
            <tr>
                <td>${item.name}</td>
                <td>${item.price.toLocaleString()}</td>
                <td>$ ${(item.price/EXCHANGE_RATE).toFixed(2)}</td>
            </tr>
        `).join('');

        const totalLocal = cart.reduce((sum, item) => sum + item.price, 0);
        document.getElementById('total-local').innerText = totalLocal.toLocaleString() + " Ø¯ÙŠÙ†Ø§Ø±";
        document.getElementById('total-usd').innerText = (totalLocal / EXCHANGE_RATE).toFixed(2);
    }

    // ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ
    function sendToWhatsApp() {
        if(cart.length === 0) return alert("Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù†ØªØ¬Ø§Øª Ø£ÙˆÙ„Ø§Ù‹");
        
        let phone = "9647717538315"; // Ø±Ù‚Ù…Ùƒ Ø§Ù„Ø¹Ø±Ø§Ù‚ÙŠ
        let msg = `*Ø·Ù„Ø¨ Ø­Ø¬Ø² Ø¬Ø¯ÙŠØ¯ Ù…Ù† Ù…ÙˆÙ‚Ø¹ÙŠ*\n\n`;
        cart.forEach((i, index) => {
            msg += `${index+1}. ${i.name} (${i.price.toLocaleString()} Ø¯.Ø¹)\n`;
        });
        msg += `\n*Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ:* ${document.getElementById('total-local').innerText}\n`;
        msg += `*Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±:* $ ${document.getElementById('total-usd').innerText}`;
        
        window.open(`https://wa.me/${phone}?text=${encodeURIComponent(msg)}`);
    }

    // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶ Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
    displayProducts();
</script>

</body>
</html>